program = { channels | effectloops | ctrls };

channels = 'chans' '{' channellist '}';
channellist = channel
    | channel ',' channellist;

effectloops = 'fx' '{'  effectlooplist '}';
effectlooplist = effectloop
    | effectlooplist ',' effectloop;
    

ctrls  =  'ctrl' '{' ctrllist  '}';
ctrllist = ctrl
    | ctrl ',' ctrllist;


# channel is name, default value (control name) and optional send
# default channel is stereo

channel = ident 'gain' value 'pan' value ['mono'|'stereo'] [sendinfo];

# value here is the gain. Post or pre indicates post- or pre-fader,
# default is post.

sendinfo = 'send' ident ('post'|'pre') value;

# if DB is present, the value is a log scale value in decibels
# and is converted to a ratio on get.

value = number ['db'] [ '(' ctrlname ')' ];

ctrl = diamondctrl | TBD

diamondctrl = ident ':' diamondname [inrangespec] ['log'] [outrangespec];

inrangespec = 'in' number ': number;
outrangespec = 'out' number ': number;




effectloop = TBD
    
